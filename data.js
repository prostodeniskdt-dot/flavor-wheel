// v21.0 dataset + meta/taxonomy (fixed search bug; added Орехи/Семена content)
window.CATEGORY_META = [
  {"key":"best","angle":-1.570795,"color":"#2ecc71"},
  {"key":"good","angle":0,"color":"#f1c40f"},
  {"key":"bad","angle":3.14159,"color":"#e74c3c"},
  {"key":"unexpected","angle":1.570795,"color":"#00c2ff"}
];

window.TAXONOMY = {
  "categories": ["Фрукты","Овощи","Пряности","Сухие ингредиенты","Травы и зелень","Орехи и семена","Молочные"],
  "groups": {
    "Фрукты": ["Цитрусовые","Ягоды","Тропические","Косточковые","Яблоки/Груши","Дыни","Виноград"],
    "Овощи": ["Стеблевые","Крестоцветные","Луковые"],
    "Пряности": ["Корневища"],
    "Сухие ингредиенты": ["Какао/Шоколад","Злаки"],
    "Травы и зелень": ["Свежие травы"],
    "Орехи и семена": ["Орехи","Семена"],
    "Молочные": ["Базовые молочные","Сыры"]
  },
  "subgroups": {
    "Цитрусовые": ["Лимоны","Лаймы","Апельсины","Грейпфрут","Мандарины"],
    "Ягоды": ["Клубника","Малина","Черника","Смородина чёрная"],
    "Тропические": ["Ананас","Манго","Маракуйя"],
    "Косточковые": ["Вишня","Черешня","Абрикос","Персик","Нектарин","Слива"],
    "Яблоки/Груши": ["Яблоки","Груши"],
    "Дыни": ["Канталупа","Медовая дыня","Арбуз"],
    "Виноград": ["Белый виноград","Красный виноград","Мускат"],

    "Стеблевые": ["Спаржа"],
    "Крестоцветные": ["Брокколи","Цветная капуста","Брюссельская капуста","Капуста белокочанная"],
    "Луковые": ["Лук репчатый","Чеснок","Зелёный лук"],

    "Корневища": ["Имбирь"],

    "Какао/Шоколад": ["Какао"],
    "Злаки": ["Рис","Овёс","Пшеница"],

    "Свежие травы": ["Мята","Базилик","Розмарин","Тимьян","Кинза","Шалфей"],

    "Орехи": ["Миндаль","Фундук","Грецкий орех","Арахис","Фисташка","Кешью"],
    "Семена": ["Кунжут","Тыквенные семечки","Подсолнечные семечки","Льняное семя"],

    "Базовые молочные": ["Сливки","Йогурт","Масло сливочное","Молоко"],
    "Сыры": ["Пармезан","Горгонзола","Бри","Фета"]
  },
  "names": {
    "Лимоны": ["Eureka","Lisbon"],
    "Лаймы": ["Persian (Tahitian)","Key"],
    "Апельсины": ["Navel","Valencia","Blood"],
    "Грейпфрут": ["Ruby Red"],
    "Мандарины": ["Clementine"],

    "Клубника": ["Клубника садовая"],
    "Малина": ["Малина красная"],
    "Черника": ["Черника"],
    "Смородина чёрная": ["Смородина чёрная"],

    "Ананас": ["Ананас"],
    "Манго": ["Манго"],
    "Маракуйя": ["Маракуйя"],

    "Вишня": ["Вишня"],
    "Черешня": ["Черешня"],
    "Абрикос": ["Абрикос"],
    "Персик": ["Персик"],
    "Нектарин": ["Нектарин"],
    "Слива": ["Слива"],

    "Яблоки": ["Granny Smith","Fuji","Golden Delicious"],
    "Груши": ["Конференция","Боск"],

    "Канталупа": ["Канталупа"],
    "Медовая дыня": ["Медовая дыня"],
    "Арбуз": ["Арбуз"],

    "Белый виноград": ["Виноград белый"],
    "Красный виноград": ["Виноград красный"],
    "Мускат": ["Виноград мускатный"],

    "Спаржа": ["Спаржа зелёная"],

    "Брокколи": ["Брокколи"],
    "Цветная капуста": ["Цветная капуста"],
    "Брюссельская капуста": ["Брюссельская капуста"],
    "Капуста белокочанная": ["Капуста белокочанная"],

    "Лук репчатый": ["Лук репчатый"],
    "Чеснок": ["Чеснок"],
    "Зелёный лук": ["Зелёный лук"],

    "Имбирь": ["Имбирь свежий"],

    "Какао": ["Какао порошок"],
    "Рис": ["Рис"],
    "Овёс": ["Овёс"],
    "Пшеница": ["Пшеница"],

    "Мята": ["Мята"],
    "Базилик": ["Базилик"],
    "Розмарин": ["Розмарин"],
    "Тимьян": ["Тимьян"],
    "Кинза": ["Кинза"],
    "Шалфей": ["Шалфей"],

    "Миндаль": ["Миндаль"],
    "Фундук": ["Фундук"],
    "Грецкий орех": ["Грецкий орех"],
    "Арахис": ["Арахис"],
    "Фисташка": ["Фисташка"],
    "Кешью": ["Кешью"],
    "Кунжут": ["Кунжут"],
    "Тыквенные семечки": ["Тыквенные семечки"],
    "Подсолнечные семечки": ["Подсолнечные семечки"],
    "Льняное семя": ["Льняное семя"],

    "Сливки": ["Сливки"],
    "Йогурт": ["Йогурт"],
    "Масло сливочное": ["Масло сливочное"],
    "Молоко": ["Молоко"],
    "Пармезан": ["Пармезан"],
    "Горгонзола": ["Горгонзола"],
    "Бри": ["Бри"],
    "Фета": ["Фета"]
  }
};

window.FLAVOR_DATA = {
  "Цитрусовые": {
    "notes": "Общее: лимонен / цитраль. Хорошо с зеленью, крестоцветными, белой рыбой.",
    "best": [
      {"to":"Кинза","tip":"Терпены дружат с зеленью."},
      {"to":"Имбирь","tip":"Цитраль + гингерол."},
      {"to":"Брокколи","tip":"Сернистые ноты и кислотность."},
      {"to":"Цветная капуста","tip":"Крестоцветные."},
      {"to":"Брюссельская капуста","tip":"Капустные работают со свежей кислотой."},
      {"to":"Тёмный шоколад","tip":"Апельсиновый профиль + какао."},
      {"to":"Белая рыба","tip":"Кислота чистит жирность."}
    ],
    "good": [
      {"to":"Авокадо","tip":"Кремовость + кислота."},
      {"to":"Курица","tip":"Маринады/соусы."},
      {"to":"Огурец","tip":"Свежая зелёность."},
      {"to":"Йогурт","tip":"Кисломолочные соусы/десерты."},
      {"to":"Миндаль","tip":"Десертная связка."}
    ],
    "bad": [ {"to":"Сильный дым","tip":"Фенолы конфликтуют; малые дозы ок."} ],
    "unexpected": [
      {"to":"Шалфей","tip":"Терпеноидные хвосты."},
      {"to":"Тмин","tip":"Пряный сдвиг"},
      {"to":"Арахис","tip":"Насыщенность + кислота"},
      {"to":"Бекон","tip":"Сладко-кислые глазури"}
    ]
  },

  /* ===== КРЕСТОЦВЕТНЫЕ ===== */
  "Крестоцветные": {
    "notes":"Серосодержащие соединения (глюкозинолаты). Хорошо с кислотой, жиром, цитрусом.",
    "best":[
      {"to":"Лимоны","tip":"Кислота балансирует серу"},
      {"to":"Масло сливочное","tip":"Жир смягчает горечь"},
      {"to":"Пармезан","tip":"Умами + соль"}
    ],
    "good":[
      {"to":"Йогурт","tip":"Соусы на основе йогурта"},
      {"to":"Миндаль","tip":"Текстура и сладость"}
    ],
    "bad":[
      {"to":"Сильный дым","tip":"Подчеркивает горечь и серу"}
    ],
    "unexpected":[
      {"to":"Апельсин","tip":"Цедра + крестоцветные"},
      {"to":"Тахини","tip":"Семенной крем против серы"}
    ]
  },

  /* ===== ЛУКОВЫЕ ===== */
  "Луковые": {
    "notes":"Серосодержащие, сладость при карамелизации. Нужен баланс кислотой/жиром.",
    "best":[{"to":"Масло сливочное","tip":"Конфи/пассеровка"},{"to":"Лимоны","tip":"Яркость"}],
    "good":[{"to":"Тимьян","tip":"Травяной фон"},{"to":"Пармезан","tip":"Умами"}],
    "bad":[{"to":"Сильный дым","tip":"Придаёт резкий деготь"}],
    "unexpected":[{"to":"Апельсин","tip":"Цедра в соусах"}]
  },

  /* ===== МОЛОЧНЫЕ (кратко) ===== */
  "Молочные": {
    "notes":"Жир и белок смягчают кислоту/горечь; база для десертов/соусов.",
    "best":[{"to":"Цитрусовые","tip":"Кремы/курды (с осторожностью)"},{"to":"Ягоды","tip":"Десерты"}],
    "good":[{"to":"Крестоцветные","tip":"Гратены"}],
    "bad":[{"to":"Сильный дым","tip":"Копчёности перебивают"}],
    "unexpected":[{"to":"Имбирь","tip":"Пана-котта/мороженое"}]
  },

  /* ===== ОРЕХИ ===== */
  "Орехи": {
    "notes":"Жир, жареные нотки, часто сладость. Дают тело и текстуру.",
    "best":[
      {"to":"Шоколад тёмный","tip":"Классика десертов"},
      {"to":"Карамель","tip":"Пралине/фадж"},
      {"to":"Кофе","tip":"Мокка/фраппе"}
    ],
    "good":[
      {"to":"Цитрусовые","tip":"Контраст жирности"},
      {"to":"Ягоды","tip":"Кислота+жир"}
    ],
    "bad":[
      {"to":"Сильный дым","tip":"Горчит на жареных маслах"},
      {"to":"Очень солёные рассолы","tip":"«Пластилин» во вкусе"}
    ],
    "unexpected":[
      {"to":"Мисо","tip":"Глубина оршадов/соусов"},
      {"to":"Соевый соус","tip":"Умами-глазури"}
    ]
  },
  "Миндаль": {
    "notes":"Сладкий, миндальная косточка (бензальдегид).",
    "best":[{"to":"Абрикос","tip":"Ядро/ликёры"},{"to":"Вишня","tip":"Amarena-логика"}],
    "good":[{"to":"Лимон","tip":"Пироги/кремы"}],
    "bad":[{"to":"Сильный дым","tip":"Горчит"}],
    "unexpected":[{"to":"Розовая вода","tip":"Восточные десерты"}]
  },
  "Фундук": {
    "notes":"Жареный, шоколадный профиль.",
    "best":[{"to":"Шоколад тёмный","tip":"Джандуя"},{"to":"Кофе","tip":"Капучино/кремы"}],
    "good":[{"to":"Груши","tip":"Тарты"}],
    "bad":[{"to":"Сильный дым","tip":"Гарь"}],
    "unexpected":[{"to":"Апельсин","tip":"Кандированные корки"}]
  },
  "Грецкий орех": {
    "notes":"Горьковатые танины, маслянистость.",
    "best":[{"to":"Горгонзола","tip":"Салаты"},{"to":"Мёд","tip":"Закуски"}],
    "good":[{"to":"Свёкла","tip":"Салаты"}],
    "bad":[{"to":"Сильный дым","tip":"Усиление горечи"}],
    "unexpected":[{"to":"Гранат","tip":"Кисло-сладкий контраст"}]
  },
  "Арахис": {
    "notes":"Жареная, землистая сладость.",
    "best":[{"to":"Чили","tip":"Сатэ/соусы"},{"to":"Лайм","tip":"Баланс"}],
    "good":[{"to":"Курица","tip":"Сатэ"}],
    "bad":[{"to":"Сильный дым","tip":"Горчит/мутнеет"}],
    "unexpected":[{"to":"Тамаринд","tip":"Кисло-сладкие соусы"}]
  },
  "Фисташка": {
    "notes":"Зелёная, сладковатая, маслянистая.",
    "best":[{"to":"Малина","tip":"Десерты"},{"to":"Белый шоколад","tip":"Кремы"}],
    "good":[{"to":"Апельсин","tip":"Цедра"}],
    "bad":[{"to":"Сильный дым","tip":"—"}],
    "unexpected":[{"to":"Розовая вода","tip":"Ближний Восток"}]
  },
  "Кешью": {
    "notes":"Мягкий, сливочный, нейтральный.",
    "best":[{"to":"Карри","tip":"Кешью-паста"},{"to":"Лайм","tip":"Баланс"}],
    "good":[{"to":"Манго","tip":"Кремы"}],
    "bad":[{"to":"Сильный дым","tip":"—"}],
    "unexpected":[{"to":"Соевый соус","tip":"Веган-сливки"}]
  },

  /* ===== СЕМЕНА ===== */
  "Семена": {
    "notes":"Тостовые, масляные; часто дают горчинку при перегреве.",
    "best":[{"to":"Огурец","tip":"Салаты"},{"to":"Йогурт","tip":"Дипы"}],
    "good":[{"to":"Цитрусовые","tip":"Контраст"}],
    "bad":[{"to":"Сильный дым","tip":"Горькие фенолы"}],
    "unexpected":[{"to":"Мёд","tip":"Халва/пасты"}]
  },
  "Кунжут": {
    "notes":"Тахини, ореховый/тростниковый.",
    "best":[{"to":"Лимон","tip":"Соусы тахини"},{"to":"Имбирь","tip":"Азиатский профиль"}],
    "good":[{"to":"Мёд","tip":"Пасты/десерты"}],
    "bad":[{"to":"Сильный дым","tip":"Горечь"}],
    "unexpected":[{"to":"Апельсин","tip":"Цедра в соусах"}]
  },
  "Тыквенные семечки": {
    "notes":"Глубокий, зелёный ореховый вкус.",
    "best":[{"to":"Кинза","tip":"Молле верде"},{"to":"Лайм","tip":"Баланс"}],
    "good":[{"to":"Йогурт","tip":"Дипы"}],
    "bad":[{"to":"Сильный дым","tip":"Терпкая горечь"}],
    "unexpected":[{"to":"Груши","tip":"Салаты"}]
  },
  "Подсолнечные семечки": {
    "notes":"Тостовый, слегка горьковатый профиль.",
    "best":[{"to":"Свёкла","tip":"Салаты"},{"to":"Лимон","tip":"Баланс"}],
    "good":[{"to":"Морковь","tip":"Песто/пасты"}],
    "bad":[{"to":"Сильный дым","tip":"—"}],
    "unexpected":[{"to":"Соя","tip":"Пасты"}]
  },
  "Льняное семя": {
    "notes":"Танины/лигнаны, орехово-льняной вкус.",
    "best":[{"to":"Йогурт","tip":"Парфе"},{"to":"Ягоды","tip":"Смузи"}],
    "good":[{"to":"Мёд","tip":"Подсластитель"}],
    "bad":[{"to":"Сильный дым","tip":"Резкая горечь"}],
    "unexpected":[{"to":"Грейпфрут","tip":"Горько-цитрус"}]
  }
};